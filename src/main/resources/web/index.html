<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Hopper Configuration</title>
    <link rel="stylesheet" type="text/css" href="./css/page.css" />
    <script src="./js/tabs.js"></script>
    <script src="./js/srcFix.js"></script>
    <script src="./js/search.js"></script>
    <script src="./js/outputSelector.js"></script>
</head>

<body oncontextmenu="return false; ">
    <div style="margin:auto; text-align: center;display:table;">

        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'HopperInput')" id="defaultOpen">Hopper Input</button>
            <button class="tablinks" onclick="openTab(event, 'HopperAdvanced')">Advanced Settings</button>
        </div>


        <form method="POST" th:action="${postAction}">
            <input type="hidden" th:value="${userCode}" name="userCode" />
            <input type="hidden" th:value="${frameID}" name="frameID" />
            <input type="hidden" th:value="${bookValue}" name="bookValue" />

            <div id="HopperInput" class="tabcontent">
                <h2>Select all the items the hopper will accept</h2>
                <input type="text" id="searchInput" onkeyup="itemFilter()" placeholder="Search for items..">
                <ul id="searchUL" class="searchUL">
                    <li th:each="item : ${items}" th:object="${item}" th:if="${item.name} != 'air'">
                        <div style="cursor: pointer;" th:class="${#lists.contains(checkItems, item.displayName)}? ' active'" th:onclick="|changeInput(event,'${item.name}')|">
                            <input type="checkbox" th:id="|I${item.name}|" style="display: none" th:checked="${#lists.contains(checkItems, item.displayName)}" th:name="|input_${item.name}|" th:value="${item.name}" />
                            <img th:id="|IM${item.name}|" th:src="|images/block/${item.name}.png|">
                            <span th:text="${item.displayName}"></span>
                        </div>
                    </li>
                </ul>
            </div>

            <div id="HopperAdvanced" class="tabcontent">
                <ul class="searchUL">
                    <li>
                        <div style="cursor: pointer;" class="tooltip" th:classappend="${#lists.contains(checkItems, 'strict_mode')}? 'active'" th:onclick="|changeInput(event,'strict_mode')|">
                            <input type="checkbox" id="Istrict_mode" style="display: none" th:checked="${#lists.contains(checkItems, 'strict_mode')}" name="strict_mode" value="strict_mode" />
                            <span th:text="|Strict Mode|"></span>
                            <span class="tooltiptext">When enabled, will even prevent the hopper pickup items that don't belong in it, instead of just relying on container to container action.</span>
                        </div>
                    </li>
                    <li>
                        <div style="cursor: pointer;" class="tooltip" th:classappend="${#lists.contains(checkItems, 'prevent_overflow')}? 'active'" th:onclick="|changeInput(event,'prevent_overflow')|">
                            <input type="checkbox" id="Iprevent_overflow" style="display: none" th:checked="${#lists.contains(checkItems, 'prevent_overflow')}" name="prevent_overflow" value="prevent_overflow" />
                            <span th:text="|Prevent Overflow|"></span>
                            <span class="tooltiptext">When enabled, will prevent the hopper from accepting items when the next inventory in the system is full.</span>
                        </div>
                    </li>
                </ul>
            </div>

            <button class="submitButton ">Submit Config</button>
        </form>
    </div>

    <script type="text/javascript ">
        function changeInput(evt, id) {
            if (document.getElementById('I' + id).getAttribute('checked') === 'false' || document.getElementById('I' + id).getAttribute('checked') === null) {
                document.getElementById('I' + id).setAttribute('checked', 'true');
                evt.currentTarget.className += " active ";
                sprites.push(id);
            } else {
                document.getElementById('I' + id).removeAttribute('checked');
                evt.currentTarget.className = evt.currentTarget.className.replace('active', " ");
                sprites = sprites.filter(e => e !== id);
            }
            document
        }

        // Get the element with id=" defaultOpen " and click on it
        document.getElementById('defaultOpen').click();
        fixImgSrc();
    </script>
    <script>
    </script>
</body>

</html>
