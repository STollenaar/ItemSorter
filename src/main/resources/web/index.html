<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Hopper Configuration</title>
    <link rel="stylesheet" type="text/css" href="./css/tabs.css" />
    <link rel="stylesheet" type="text/css" href="./css/options.css" />
    <link rel="stylesheet" type="text/css" href="./css/page.css" />
    <script src="./js/tabs.js"></script>
    <script src="./js/search.js"></script>
</head>

<body>
    <div style="width: 50%; margin:auto; text-align: center">

        <div class="tab">
            <button class="tablinks" onclick="openTab(event, 'HopperInput')" id="defaultOpen">Hopper Input</button>
            <button class="tablinks" onclick="openTab(event, 'HopperOutput')">Hopper Output</button>
        </div>


        <form method="POST" th:action="${postAction}">
            <div id="HopperInput" class="tabcontent">
                <input type="hidden" th:value="${userCode}" name="userCode" />
                <input type="hidden" th:value="${frameID}" name="frameID" />
                <h2>Select all the items the hopper will accept</h2>
                <input type="text" id="searchInput" onkeyup="itemFilter()" placeholder="Search for items..">
                <ul id="searchUL" class="searchUL" style="height: 70%; overflow-y: scroll">
                    <li th:each="item : ${items}" th:object="${item}" th:if="${item.name} != 'air'">
                        <input type="checkbox" th:id="'I' + ${item.name}" style="display: none" th:name="'input_'  + ${item.name}" th:value="${item.name}" />

                        <a th:id="'A' + ${item.name}" href="#!" th:onclick="'changeInput(event,\'' + ${item.name} + '\')'" th:text="${item.displayName}"></a>
                    </li>
                </ul>
            </div>

            <div id="HopperOutput" class="tabcontent">
                <h2>Configure how the hopper will output the items.</h2>
            </div>

            <button class="submitButton">Submit Config</button>
        </form>
    </div>

    <script>
        function changeInput(evt, id) {
            if (document.getElementById('I' + id).getAttribute('checked') === 'false' || document.getElementById('I' + id).getAttribute('checked') === null) {
                document.getElementById('I' + id).setAttribute('checked', 'true');
                evt.currentTarget.className += " active";
            } else {
                document.getElementById('I' + id).setAttribute('checked', 'false');
                evt.currentTarget.className = evt.currentTarget.className.replace('active', "");
            }
            document
        }

        // Get the element with id=" defaultOpen " and click on it
        document.getElementById('defaultOpen').click();
    </script>
</body>

</html>